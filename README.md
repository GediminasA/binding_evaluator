## Workflow setup

1. Install `conda`:
```bash
   wget -P miniconda https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh &&
   chmod 755 ./miniconda/Miniconda3-latest-Linux-x86_64.sh &&
   ./miniconda/Miniconda3-latest-Linux-x86_64.sh
```

2. Add path of `miniconda` to `.bashrc` if not selected option to add automatically during installation:
```bash
   cd ~/ && pth=$(pwd) &&
   echo "PATH=$PATH:$pth/miniconda3/bin" >> ~/.bashrc
```

3. Install mamba frontend for conda. This helps to handle dependancies installation.
```bash
    conda install -c conda-forge mamba
```

4. Clone the repository. nd enter it. Note - it contains submodules.
```bash 
    git clone --recurse-submodules  git@github.com:GediminasA/binding_evaluator.git
    cd binding_evaluator
```
5. Create your `conda` environment:
 ```bash
    mamba env create -f envs/binding_evaluator.yaml 
 ```

6. Activate created environment:
```bash
    conda activate binding_evaluator
```

7. Checkout exemplary data git lfs:
```bash
    git lfs fetch
    git lfs install
    git lfs checkout
```

Make sure that uidmap is install ed in the system, this coud ne done like:
 ```bash
 sudo apt-get install uidmap
 ```

The sumbodule "covid-lt" should oint into a branch "4generalworkflow" 
git checkout remotes/origin/4generalworkflow

The target mutations can by generated as:
```
snakemake --profile local --configfile configs/antibody.yaml  -k antibody_run/mutants_structure_generation/TEMPLATES/todoList
```

A workflow assesing anaergetics with promod -> evoef + prodigy can by invoked like this 

```
snakemake --profile local --configfile configs/antibody.yaml  -k get_summary_of_binding
```

Some explanations:

Rules `model_mutants_promod` generate model with promod, using templates generated by rule `get_template_sequence`

Preprocessed structures are can be placed in a location idicated by the config.

Results should be placed like here

antibody_run/rezults/promod_models_results_main.csv